---
import Layout from "../layouts/Layout.astro";

const title = "DivNectar - Blog";
const description = "Sewdohe's useless rambliungs about the web, tech, Minecraft and life.";
const image = {
  url: "https://divnectar.com/site-logo.webp",
  alt: "DivNectar Logo",
};

import { getAllPosts } from "../lib/wordpress";
import type Article from "../interfaces/article";
import TagCloud from "../components/TagCloud.astro";

const articles = await getAllPosts();

console.log("articles:");
console.log(articles);
---

<Layout title={title} description={description} image={image}>
  <div class="w-full">
    <TagCloud />

    <div class="max-w-7xl mx-auto px-4">
      <div class="columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6">
        {
          articles &&
            articles.map((article) => (
              <div class="break-inside-avoid mb-6">
                <div class="rounded-lg shadow-md bg-ctp-crust border-l-ctp-sapphire">
                  <a href={`/blog/${article.slug}`} class="block">
                    <div class="relative h-48 bg-ctp-mantle rounded-t-lg flex items-center justify-center">
                      <img
                        class="w-full h-full object-contain p-2"
                        src={article.cover.url}
                        alt={article.cover.alternativeText || article.title}
                      />
                    </div>
                  </a>
                  <div class="flex flex-row justify-around p-2 px-4">
                    <a href={`/tags/${article.category.slug}`}>
                      <div class="bg-ctp-peach p-1 text-ctp-mantle rounded-3xl">{article.category.name}</div>
                    </a>
                  </div>
                  <div class="p-5">
                    <a href={`/blog/${article.slug}`}>
                      <h5 class="mb-2 text-2xl font-bold tracking-tight text-ctp-text">
                        {article.title}
                      </h5>
                    </a>
                    <p class="mb-3 font-normal text-ctp-text">
                      {article.description}
                    </p>
                    <a
                      href={`/blog/${article.slug}`}
                      class="inline-flex items-center hover:scale-105 hover:bg-ctp-sky hover:text-ctp-mantle transition-all duration-100 px-3 py-2 text-sm font-medium shadow-md rounded-md text-center focus:ring-4 focus:outline-none text-ctp-text bg-ctp-mantle focus:ring-blue-300"
                    >
                      Read more
                    </a>
                  </div>
                </div>
              </div>
            ))
        }
      </div>
    </div>
  </div>
</Layout>
